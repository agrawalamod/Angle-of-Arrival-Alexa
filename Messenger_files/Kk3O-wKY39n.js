if (self.CavalryLogger) { CavalryLogger.start_js(["ynkfv"]); }

__d("MessengerBootloadedSecondarySearchLogger",["Bootloader","MessengerSecondarySearchFunnelConstants","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[],h="",i={ORDERED_GCF_FRIENDLIST:[],SHORT_PROFILES:[],SUGGESTED_RECIPIENTS:[]},j=!1,k=!1;c=b("MessengerSecondarySearchFunnelConstants").EVENTS;var l=c.END,m=c.IMPRESSIONS,n=c.START,o=c.QUERY_CHANGED,p=c.RESULT_SELECTED,q=c.SOURCE_ENDED,r=c.SOURCE_STARTED,s=c.TOKEN_REMOVED;d=b("MessengerSecondarySearchFunnelConstants").END_ACTIONS;var t=d.ABANDON,u=d.SINGLE_RESULT_SELECTED;f=b("MessengerSecondarySearchFunnelConstants").SOURCES;var v=f.SERVER,w=f.SHORT_PROFILES,x=f.SUGGESTED_RECIPIENTS,y=f.LOCAL_AND_SERVER,z=f.ORDERED_GCF_FRIENDLIST,A=b("MessengerSecondarySearchFunnelConstants").ENTRY_SURFACES.COMPOSER;function B(a){if(i.SUGGESTED_RECIPIENTS.includes(a))return x;else if(i.ORDERED_GCF_FRIENDLIST.includes(a))return z;else if(i.SHORT_PROFILES.includes(a))return w;else return v}function a(a){__p&&__p();if(!b("gkx")("678592"))return;b("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger"],function(c){__p&&__p();switch(a.name){case n:if(a.surface===A&&k===!0)break;j=!1;i={ORDERED_GCF_FRIENDLIST:[],SHORT_PROFILES:[],SUGGESTED_RECIPIENTS:[]};c.startFunnel(b("MessengerSecondarySearchFunnelConstants").CLIENTS.WWW,a.surface,a.surface,null,a.loggingID);a.surface===A&&(k=!0);break;case l:var d=a.end_reason;a.surface===b("MessengerSecondarySearchFunnelConstants").SEARCH_SURFACES.BROADCAST&&(d=j?u:t);c.endFunnel(b("MessengerSecondarySearchFunnelConstants").END_REASONS.ACTION,d,a.loggingID,a.threadID,a.isNewThread);k=!1;break;case m:d=a.entries.map(function(a){a.data_source=[B(a.result_fbid)];return a});g=a.entries.map(function(a){return a.result_fbid});c.impressions(a.query,d,y,a.loggingID);break;case o:h=a.query;c.queryChanged(a.query,a.loggingID);break;case p:j=!0;d=B(a.id);var e=g.indexOf(a.id);c.resultSelected(a.id,e,a.type,a.query,d,a.surface,a.loggingID,a.selectionType);break;case q:e=!a.query||a.query===h;switch(a.source){case x:i.SUGGESTED_RECIPIENTS=a.ids?a.ids:[];break;case w:i.SHORT_PROFILES=a.ids?a.ids:[];e=!0;break;case z:i.ORDERED_GCF_FRIENDLIST=a.ids?a.ids:[];e=!0;break;default:break}c.sourceEnded(a.query,a.numResults,a.source,a.status,e,a.loggingID);break;case r:c.sourceStarted(a.query,a.source,a.loggingID);break;case s:c.tokenRemoved(a.deletedIDs,a.clearedAll,a.loggingID);break}},"MessengerBootloadedSecondarySearchLogger")}e.exports={logSearchEvent:a}}),null);
__d("ChatSearchSource",["AbstractSearchSource","AsyncRequest","Bootloader","CurrentUser","MercuryParticipantTypes","MessengerBootloadedSecondarySearchLogger","MessengerSearchFunnelLoggerConstants","MessengerSecondarySearchFunnelConstants","promiseDone","requireWeak","SearchableEntry","SearchSourceCallbackManager","ShortProfiles","TokenizeUtil","debounce","emptyFunction","isValidUniqueID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;b("requireWeak")("OrderedFriendsList",function(a){g=a});a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this)||this;d.$ChatSearchSource1=new(b("SearchSourceCallbackManager"))({parseFn:b("TokenizeUtil").parse,matchFn:b("TokenizeUtil").isQueryMatch,indexFn:c.indexFn,searchType:c.searchType||""});d.$ChatSearchSource2=c.queryRequests||[];d.$ChatSearchSource3=c.searchType||"";d.$ChatSearchSource4=!1;d.$ChatSearchSource5=b("debounce")(d.$ChatSearchSource5,100,babelHelpers.assertThisInitialized(d));d.$ChatSearchSource6=c.excludeMemorializedUsers||!1;d.$ChatSearchSource7="";return d}var d=c.prototype;d.bootstrapImpl=function(a){var c=this;b("promiseDone")(b("ShortProfiles").fetchAll(),function(){c.$ChatSearchSource4=!0,c.$ChatSearchSource8(),a()})};d.searchImpl=function(a,b,c){__p&&__p();var d=this,e=null,f={},g=c&&c.onQueryFinished,h=c&&c.onQueryStarted;h&&h(a);h=this.$ChatSearchSource1.search(a,function(c){!e?(e=c,e.forEach(function(a){return f[a.getUniqueID()]=!0})):c.forEach(function(a){var b=a.getUniqueID();f[b]||(e.push(a),f[b]=!0)}),b(e,a),a.length===1&&this.$ChatSearchSource4&&(g&&g(a))}.bind(this),c);if(!h||!this.$ChatSearchSource2||!this.$ChatSearchSource2.length||a.length===0){g&&g(a);return}if(a.length===1){this.$ChatSearchSource4&&(g&&g(a));return}var i={value:a,existing_ids:e&&e.map(function(a){return a.getUniqueID()}).join(","),limit:c&&c.threadLimit,exclude_memorialized_users:this.$ChatSearchSource6,logging_id:c&&c.loggingID},j=this.$ChatSearchSource2.length;this.$ChatSearchSource2.forEach(function(b){var c=Date.now();d.$ChatSearchSource5(i,b,function(b){b=d.$ChatSearchSource9(d.$ChatSearchSource10(b)).filter(function(a){return!!a});d.$ChatSearchSource11(a,b.length,c);d.$ChatSearchSource12(b,a);j--;j===0&&(d.$ChatSearchSource1.setQueryStringAsExhausted(a),g&&g(a))})},this)};d.getAllEntriesMap=function(){return this.$ChatSearchSource1.getAllEntries()};d.$ChatSearchSource11=function(a,c,d){var e=this;if(this.$ChatSearchSource3===b("MessengerSearchFunnelLoggerConstants").WWW_SIDEBAR_TAG){var f=Date.now();b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger","MessengerUniversalSearchFunnelLoggerConstants"],function(b,g){b.logSourceEnded(a,g.SOURCES.SERVER,c,g.QUERY_PROGRESS.FINISHED),e.$ChatSearchSource13(b.getCurrentFunnelID(),d,f,a,c,"universal")},"ChatSearchSource")}else this.$ChatSearchSource3===b("MessengerSecondarySearchFunnelConstants").SEARCH_SURFACES.BROADCAST&&b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.SOURCE_ENDED,source:b("MessengerSecondarySearchFunnelConstants").SOURCES.SERVER,query:a,numResults:c,status:b("MessengerSecondarySearchFunnelConstants").SOURCE_STATUSES.FINISHED,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.BROADCAST})};d.$ChatSearchSource13=function(a,c,d,e,f,g){var h=this;b("Bootloader").loadModules(["MessengerSearchDataSourceLoadedEventTypedLogger","MessengerUniversalSearchFunnelLoggerConstants"],function(b,i){new b().setSearchFunnelID(a).setStartTimeMs(c).setEndTimeMs(d).setQueryString(e).setDataSource(i.SOURCES.SERVER).setResultsCount(f).setLoadStatus(i.QUERY_PROGRESS.FINISHED).setIsResultUsed(h.$ChatSearchSource7===e).setSearchSurface(g).log()},"ChatSearchSource")};d.$ChatSearchSource8=function(){var a=b("ShortProfiles").getCachedProfileIDs();a=a.filter(function(a){var c=b("ShortProfiles").getNow(a);return a==b("CurrentUser").getID()||c.type===b("MercuryParticipantTypes").FRIEND||c.type===b("MercuryParticipantTypes").FB4C});var c=a.map(this.$ChatSearchSource14);c.length&&(this.$ChatSearchSource3===b("MessengerSecondarySearchFunnelConstants").SEARCH_SURFACES.BROADCAST&&b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.SOURCE_ENDED,source:b("MessengerSecondarySearchFunnelConstants").SOURCES.SHORT_PROFILES,query:"",ids:a,numResults:c.length,status:b("MessengerSecondarySearchFunnelConstants").SOURCE_STATUSES.FINISHED,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.BROADCAST}),this.$ChatSearchSource1.addLocalEntries(c))};d.$ChatSearchSource9=function(a){return a.map(this.$ChatSearchSource15,this)};d.$ChatSearchSource15=function(a,c){if(a.mercury_thread)return!g?null:g.normalizeThreadEntry(a,c);var d=a.text,e=a.uid;if(!d||!b("isValidUniqueID")(e))return null;var f=g?g.getActiveRank(e):0;g&&!g.contains(e)&&(f+=c);return new(b("SearchableEntry"))({uniqueID:e,title:d,order:f,subtitle:a.subtext,type:a.render_type||a.type,photo:a.photo,uri:a.path,auxiliaryData:{isVerified:a.is_verified,isMessengerUser:a.is_messenger_user,alias:a.alias,workForeignEntityInfo:a.work_foreign_entity_info}})};d.$ChatSearchSource10=function(a){a=a.getPayload();if(Array.isArray(a))return a;else if(a&&a.entries)return a.entries;else return[]};d.$ChatSearchSource14=function(a){var c=b("ShortProfiles").getNow(a),d=a==b("CurrentUser").getID()?b("MercuryParticipantTypes").FRIEND:c.type,e=[c.additionalName,c.alternateName].concat(c.searchTokens||[]).join(" "),f=c.name,h=null;return new(b("SearchableEntry"))({uniqueID:a,title:f,order:g?g.getActiveRank(a):0,subtitle:h,keywordString:e,type:d,photo:c.thumbSrc,uri:c.uri,auxiliaryData:{isMessengerUser:c.is_messenger_user,alias:c.alias}})};d.$ChatSearchSource5=function(a,c,d,e){this.$ChatSearchSource3===b("MessengerSearchFunnelLoggerConstants").WWW_SIDEBAR_TAG&&a.value!==this.$ChatSearchSource7&&(b("Bootloader").loadModules(["MessengerSearchFunnelLogger","MessengerUniversalSearchFunnelLogger","MessengerUniversalSearchFunnelLoggerConstants"],function(c,d,e){c.logStartQuery(b("MessengerSearchFunnelLoggerConstants").NAME,a.value),d.logSourceStarted(a.value,e.SOURCES.SERVER)},"ChatSearchSource"),this.$ChatSearchSource7=a.value),new(b("AsyncRequest"))(c.uri).setData(babelHelpers["extends"]({},a,c.data)).setMethod("GET").setReadOnly(!0).setHandler(d).setErrorHandler(e||b("emptyFunction")).setAllowCrossPageTransition(!0).send()};d.$ChatSearchSource12=function(a,b){a.length&&this.$ChatSearchSource1.addQueryEntries(a,b)};d.addLocalEntries=function(a){this.$ChatSearchSource1.addLocalEntries(a)};d.refreshData=function(){b("ShortProfiles").fetchAll()};return c}(b("AbstractSearchSource"));e.exports=a}),null);
__d("MessengerSearchSourceUtils",["MessengerConfig","compactArray"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getNullStateEntries:function(a){__p&&__p();var c=a;if(b("MessengerConfig").NSDB)switch(b("MessengerConfig").NSDBT){case"top_friends":c=b("compactArray")(a.map(function(a){return a.getType()==="friend"?a:null}));break;case"top_groups":c=b("compactArray")(a.map(function(a){return a.getType()==="thread"?a:null}));break;case"top_friends_and_groups":var d=b("compactArray")(a.map(function(a){return a.getType()==="thread"?a:null}));a=b("compactArray")(a.map(function(a){return a.getType()==="friend"?a:null})).slice(0,b("MessengerConfig").NSDBNF);c=a.concat(d);break}return c}};e.exports=a}),null);
__d("MessengerSearchSource",["ChatSearchSource","MercuryConfig","MercuryIDs","MercuryParticipantTypes","MercurySingletonProvider","MessengerConfig","MessengerEnvironment","MessengerParticipants.bs","MessengerSearchFunnelLoggerConstants","MessengerSearchSourceUtils","MessengerTypeaheadUtils","SearchableEntry","compactArray","emptyFunction","requireWeak"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=50,h=b("MessengerEnvironment").messengerui;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getForFBID=function(a){return i.getForFBID(a)};c.get=function(){return i.get()};function c(c){var d;d=a.call(this,{queryRequests:[{uri:"/ajax/mercury/composer_query.php"}],searchType:b("MessengerSearchFunnelLoggerConstants").WWW_SIDEBAR_TAG})||this;d.$MessengerSearchSource1=[];d.$MessengerSearchSource2=c;return d}var d=c.prototype;d.getDefaultEntriesStatus=function(){return b("MessengerConfig").NSDB&&this.$MessengerSearchSource1&&this.$MessengerSearchSource1.length>0};d.bootstrapImpl=function(c){var d=this;b("requireWeak")("OrderedFriendsList",function(c){return c.getSearchableEntries(g,!0,function(c){d.$MessengerSearchSource1=b("MessengerSearchSourceUtils").getNullStateEntries(c),a.prototype.addLocalEntries.call(d,c)})});var e=b("MercuryIDs").getParticipantIDFromUserID(this.$MessengerSearchSource2);b("MessengerParticipants.bs").get(e,function(c){a.prototype.addLocalEntries.call(d,[new(b("SearchableEntry"))({uniqueID:c.fbid?c.fbid.toString():c.id,title:c.name,type:b("MercuryParticipantTypes").FRIEND,photo:c.big_image_src||c.image_src,uri:c.href,auxiliaryData:{isMessengerUser:c.is_messenger_user}})])});a.prototype.bootstrapImpl.call(this,b("emptyFunction"));c()};d.searchImpl=function(c,d,e){e=e||{};if(c===""&&e.showDefaultEntries){d(this.$MessengerSearchSource1,c);var f=e&&e.onQueryFinished;f&&f("",this.$MessengerSearchSource1);return}e.threadLimit=b("MercuryConfig").MaxThreadResults;a.prototype.searchImpl.call(this,c,this.$MessengerSearchSource3(d,e),e)};d.$MessengerSearchSource3=function(a,c){return h&&c&&c.showThreadSearchEntry?function(c,d){var e=b("MessengerTypeaheadUtils").getMessageSearchEntry(d);e?a([e].concat(c),d):a(c,d)}:a};return c}(b("ChatSearchSource"));var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerSearchTypeahead.react",["cx","fbt","ix","AbstractTypeahead.react","Bootloader","BootloadOnRender.react","CurrentUser","Image.react","InstantGameContextType","JSResource","LazyComponent.react","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryThreadIDMap","MercuryTypeaheadConstants","MercuryVanityIDMap.bs","MessengerConfig","MessengerSearchFunnelLoggerConstants","MessengerSearchFunnelState","MessengerSearchLoggerUtil","MessengerSearchSource","MessengerSpinner.react","MessengerState.bs","MessengerUniversalSearchFunnelLoggerConstants","QuicksilverSources","React","TypeaheadNavigation","gkx","ifRequired","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MercuryThreadIDMap").get(),k=b("gkx")("865973");a=b("React").PropTypes;var l=i("86933"),m=100,n=null,o=null;c=b("MessengerUniversalSearchFunnelLoggerConstants").END_ACTIONS;var p=c.ABANDON,q=c.RESULT_SELECTED;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c;c=a.apply(this,arguments)||this;c.state={isLoading:!1,orderable:!!o,gameID:null};c.$8=function(a){__p&&__p();if(!k)return!0;var d=c.props.viewer,e=b("MessengerState.bs").getThreadMetaNow(d,b("MercuryIDs").getThreadIDFromUserID(a.getUniqueID()));if(!e){var f=b("MercuryIDs").getThreadIDFromUserID(a.getUniqueID());b("MessengerState.bs").getThreadMeta(c.props.viewer,f,function(a){e=a})}f=!1;e&&b("MessengerState.bs").compute(d,function(a){a=a.blocked_ids;b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(d,a,e)&&(f=!0)});a=a.getTitle().toUpperCase()===c.props.queryString.toUpperCase();return a||!f};c.$6=function(){var a;(a=c.props).onBlur.apply(a,arguments);b("Bootloader").loadModules(["MessengerSearchFunnelLogger","MessengerUniversalSearchFunnelLogger"],function(a,d){a.endFunnel(b("MessengerSearchFunnelLoggerConstants").NAME),!c.$18?d.endFunnel(b("MessengerUniversalSearchFunnelLoggerConstants").END_REASONS.END_ACTION,p):(d.endFunnel(b("MessengerUniversalSearchFunnelLoggerConstants").END_REASONS.END_ACTION,q),c.$18=!1)},"MessengerSearchTypeahead.react");c.setState({isLoading:!1})};c.$7=function(){var a;(a=c.props).onChange.apply(a,arguments)};c.$9=function(){c.$10();c.$3!==null&&c.props.onFocus(c.$3.getDefaultEntriesStatus());var a=Math.floor(Math.random()*65536);c.$2.setSessionID(a);b("Bootloader").loadModules(["MessengerSearchFunnelLogger","MessengerUniversalSearchFunnelLogger"],function(a,d){a.startFunnel(b("MessengerSearchFunnelLoggerConstants").NAME,b("MessengerSearchFunnelLoggerConstants").WWW_SIDEBAR_TAG,b("MessengerSearchFunnelLoggerConstants").UNIVERSAL_SEARCH),d.startFunnel(b("MessengerUniversalSearchFunnelLoggerConstants").ENTRY_SURFACES.SIDEBAR,b("MessengerUniversalSearchFunnelLoggerConstants").INTERFACES.WWW,c.$2)},"MessengerSearchTypeahead.react")};c.$10=function(){c.state.orderable||b("Bootloader").loadModules(["MessengerTypeaheadView.react","MessengerTypeaheadUtils"],function(a,d){b("ifRequired")("FantaTabsEagerBootloader",function(a){return a.bootload()}),n=a,o=d,c.setState({orderable:!0})},"MessengerSearchTypeahead.react")};c.$14=function(a){a===c.props.queryString&&c.setState({isLoading:!0})};c.$13=function(a,d){a===c.props.queryString&&(a===""&&d!=null&&d.length>0&&b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){a.logNullStateImpressions(d,c.props.maxEntries)},"MessengerSearchTypeahead.react"),c.setState({isLoading:!1}))};c.$15=function(a,d){b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(e){e.logSourceEnded(a,b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_XCONTROLLER,d,b("MessengerUniversalSearchFunnelLoggerConstants").QUERY_PROGRESS.FINISHED,a===c.props.queryString)},"MessengerSearchTypeahead.react")};c.$12=function(a){return o?o.sortEntries(a,c.props.queryString):a};c.$1=function(){c.setState({gameID:null})};c.$11=function(a,d){__p&&__p();d=a.getUniqueID();var e=a.getType();a=a.getAuxiliaryData().alias;var f=c.props.queryString;a&&b("MercuryVanityIDMap.bs").set(a,b("MercuryIDs").getParticipantIDFromUserID(d));c.$18=!0;if(e===b("MercuryTypeaheadConstants").THREAD_TYPE)j.getClientIDFromServerID(d,function(a){c.props.onSelect(a,e),b("Bootloader").loadModules(["MessengerSearchFunnelLogger","MessengerUniversalSearchFunnelLogger"],function(c,d){c.logResultSelection(b("MessengerSearchFunnelLoggerConstants").NAME,f,a,b("MessengerSearchFunnelLoggerConstants").GROUP),d.logResultSelected(f,a,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_TYPES.GROUP,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD)},"MessengerSearchTypeahead.react")});else if(e===b("MercuryTypeaheadConstants").GAME_TYPE)c.setState({gameID:d});else{var g=b("MessengerSearchLoggerUtil").getLoggingTypeFromMercuryType(e);b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),b("MercuryIDs").getThreadIDFromUserID(d),function(a){c.props.onSelect(a.thread_id,e),b("Bootloader").loadModules(["MessengerSearchFunnelLogger","MessengerUniversalSearchFunnelLogger"],function(c,d){c.logResultSelection(b("MessengerSearchFunnelLoggerConstants").NAME,f,a.thread_id,g),d.logResultSelected(f,a.thread_id,g,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD)},"MessengerSearchTypeahead.react")})}};babelHelpers.assertThisInitialized(c).$1=c.$1.bind(babelHelpers.assertThisInitialized(c));c.$2=new(b("MessengerSearchFunnelState"))();c.$3=b("MessengerSearchSource").getForFBID(c.props.viewer);return c}var d=c.prototype;d.UNSAFE_componentWillMount=function(){__p&&__p();var a=this,c=function(a,b,c){b=a.indexOf(b);b=b==-1?a.length-1:b-1;c(b==-1?a[a.length-1]:a[b])},d=function(a,b,c){b=a.indexOf(b)+1;c(b==a.length?a[0]:a[b])};c=b("TypeaheadNavigation").moveDown;d=b("TypeaheadNavigation").moveUp;this.$4=function(b){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return c.apply(void 0,[o.orderEntries(b,a.props.queryString)].concat(e))};this.$5=function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];return d.apply(void 0,[o.orderEntries(b,a.props.queryString)].concat(e))}};d.render=function(){var a=this,c=this.props.isFacebookChat?h._("Search"):h._("Search Messenger"),d=b("CurrentUser").isWorkUser()?h._("coworkers to message"):h._("friends to message");return b("React").createElement("div",{className:"_1nq2"},b("React").createElement(b("AbstractTypeahead.react"),{"aria-label":d,autoHighlight:this.props.isFacebookChat,blurOnWindowBlur:!1,className:b("joinClasses")(this.props.className||"","_5iwm"+(this.props.isFocused||!!this.props.queryString?" _5iwn":"")+" _150g"+(this.props.hideResults?" _1a03":"")),disabled:this.props.hideResults,inputClassName:"_3rhb navigationFocus",navigation:{moveUp:this.$4,moveDown:this.$5},onBlur:this.$6,onChange:this.$7,entryFilter:k?this.$8:void 0,onFocus:this.$9,onMouseOver:this.$10,onClick:this.$10,onSelectAttempt:this.$11,placeholder:c.toString(),presenter:{ViewRenderer:n,alwaysVisibleOnFocus:!0,extraRendererProps:{className:"_11_d",hasHoverState:this.props.isFacebookChat,isLoading:this.state.isLoading,onScrollIntoView:this.props.onScrollIntoView,viewer:this.props.viewer},maxEntries:this.props.maxEntries||m,sortEntries:this.$12,useLayer:!1},queryString:this.props.queryString,role:"search",searchSource:this.$3,searchSourceOptions:{loggingID:this.$2.getSessionID(),onQueryFinished:this.$13,onQueryStarted:this.$14,onResponseReturned:this.$15,showDefaultEntries:this.props.isFacebookChat?b("MessengerConfig").NSDB:!0,showThreadSearchEntry:!this.props.isFacebookChat&&!!this.props.queryString},selectOnTab:!0,spellCheck:!1,showEntriesOnFocus:this.props.isFacebookChat?b("MessengerConfig").NSDB:!0}),b("React").createElement(b("Image.react"),{onMouseDown:function(){var b;a.$16();(b=a.props).onClear.apply(b,arguments)},className:b("joinClasses")(this.props.className||"",(this.props.queryString?"":"hidden_elem")+" _2xme"),src:l}),this.$17())};d.$17=function(){return!this.state.gameID?null:b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerGamesQuicksilverPlayerContainer.react").__setRef("MessengerSearchTypeahead.react"),placeholder:b("React").createElement(b("MessengerSpinner.react"),null),component:b("React").createElement(b("LazyComponent.react"),{initialContextType:b("InstantGameContextType").SOLO,initialGameID:this.state.gameID,onHide:this.$1,initialSource:b("QuicksilverSources").MESSENGER_SEARCH,sourceID:null})})};d.$16=function(){b("Bootloader").loadModules(["MessengerSearchFunnelLogger"],function(a){a.logClearQuery(b("MessengerSearchFunnelLoggerConstants").NAME)},"MessengerSearchTypeahead.react")};return c}(b("React").PureComponent);d.propTypes={className:a.string,hideResults:a.bool,isFacebookChat:a.bool,isFocused:a.bool,maxEntries:a.number,onBlur:a.func,onChange:a.func,onClear:a.func,onFocus:a.func,onSelect:a.func.isRequired,onScrollIntoView:a.func,queryString:a.string,viewer:a.string.isRequired};e.exports=d}),null);
__d("ChatTypeaheadWrapper.react",["cx","Arbiter","Bootloader","ChatOpenTabEventLogger","ChatSidebarActions","ChatSidebarComposeLink.react","ChatSidebarDropdown.react","ChatSidebarGroupCreateButtonReact.bs","ChatSidebarSections","ChatSidebarSheet.react","ChatTypeaheadConstants","FantaTabActions","MercuryIDs","MercuryParticipantTypes","MessengerConfig","MessengerDiscoveryEntryPoint","MessengerSearchTypeahead.react","React","SidebarType","WorkSMBHelpSidebar","emptyFunction","getActiveElement","gkx","ifRequired"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("WorkSMBHelpSidebar").module,i=40;function j(a){b("Arbiter").inform("sidebar/typeahead/active",a)}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={height:0,value:c.getInitialQueryString(),isSearching:!!c.getInitialQueryString()},c.$1=function(){c.setState({isSearching:!1,value:""})},c.$2=function(a){a&&c.setState({isSearching:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getInitialQueryString=function(){var a="";b("gkx")("678264")&&b("ifRequired")("ChatTypeaheadCore",function(b){a=b.getLastSearchQuery()});return a?a:""};d.componentDidMount=function(){var a=this;b("gkx")("678264")&&(b("ifRequired")("ChatTypeaheadCore",function(a){a.processInteractionsQueue()}),this.getInitialQueryString()!==""&&j(!0));this.props.isSidebar?b("Arbiter").subscribe("sidebar/resized",function(b,c){a.setState({height:c})}):b("Arbiter").subscribe("buddyList/resized",function(b,c){a.setState({height:c})})};d.UNSAFE_componentWillUpdate=function(a,b){b.isSearching!==this.state.isSearching&&j(b.isSearching)};d.render=function(){__p&&__p();var a=this,c=this.state.height!=null?Math.floor((this.state.height-i*2)/i):null;return b("React").createElement("div",{id:"chatsearch"},!this.state.isSearching&&h&&b("React").createElement(h,null),b("gkx")("678264")?null:b("React").createElement(b("ChatSidebarSheet.react"),{className:"fbChatSidebarMessage",viewer:this.props.id,isSidebar:this.props.isSidebar}),b("React").createElement(b("MessengerSearchTypeahead.react"),{className:"_62it",isFacebookChat:!0,isFocused:!0,maxEntries:c,queryString:this.state.value,viewer:this.props.id,onBlur:this.$1,onChange:function(c){var d=c.target.value;b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){a.logQueryChanged(d)},"ChatTypeaheadWrapper.react");a.setState({isSearching:d!==""||b("MessengerConfig").NSDB===!0,value:d})},onClear:b("emptyFunction"),onFocus:this.$2,onScrollIntoView:b("emptyFunction"),onSelect:function(c,d){__p&&__p();var e=b("getActiveElement")();e&&e.blur();if(d===b("ChatTypeaheadConstants").MEETING_ROOM_PAGE_TYPE)b("Bootloader").loadModules(["goURI"],function(d){a.setState({isSearching:!1,value:""});var e=b("MercuryIDs").getUserIDFromThreadID(c);d("/"+(e||""))},"ChatTypeaheadWrapper.react");else{b("FantaTabActions").openTab(c,[b("MessengerDiscoveryEntryPoint").FB_SEARCH_CHAT_SIDEBAR_TYPEAHEAD]);e=null;(!d||d===b("MercuryParticipantTypes").FRIEND||d===b("ChatTypeaheadConstants").FRIEND_TYPE||d===b("ChatTypeaheadConstants").PAGE_TYPE||d===b("ChatTypeaheadConstants").USER_TYPE)&&(b("MercuryIDs").isValidThreadID(c)&&(e=b("MercuryIDs").getUserIDFromThreadID(c)));b("ChatOpenTabEventLogger").logClickOpen(b("ChatSidebarSections").TYPEAHEAD,c,e)}}}),this.props.isSidebar?b("React").createElement("div",{className:"_531b"},b("React").createElement(b("ChatSidebarDropdown.react"),{sidebarType:b("SidebarType").SIDEBAR,onToggleSidebar:b("ChatSidebarActions").disable}),b("React").createElement(b("ChatSidebarComposeLink.react"),{className:"_3a-4 _5q85"}),b("React").createElement(b("ChatSidebarGroupCreateButtonReact.bs").make,{viewer:this.props.id})):null)};return c}(b("React").Component);e.exports=a}),null);